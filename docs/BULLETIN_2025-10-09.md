# System Update Bulletin - 2025-10-09

## üìå New Infrastructure (Operational)

### 1. Content-Addressed DAG Pattern ‚úÖ

**What exists**:
- `lib/content-dag.sh` - Core primitives (hash, store, DAG nodes, provenance)
- `scripts/bridge-send-dag.sh` - Messages with cryptographic provenance
- `scripts/bridge-query-provenance.sh` - Query message chains
- `docs/CONTENT_DAG_PATTERN.md` - Full pattern documentation
- Demo: `examples/content-dag-demo.sh`

**What's conceptual**:
- Python `content_dag.py` library (future)
- AAFC herbarium tools (future, awaiting requirements)
- Build artifact tracking (future)

**Storage**: `.dag/objects/` and `.dag/nodes/` (gitignored)

**Pattern proven** via agent bridge integration. Ready to apply to new domains when needed.

### 2. OpenRouter LLM Budget System ‚úÖ

**Budget**: $15.00 prepaid, shared resource

**Tools**:
```bash
# Make LLM calls with auto-tracking
./scripts/llm-call.sh --prompt "..." --caller your-name

# Check budget
./scripts/openrouter-budget.sh status
./scripts/openrouter-budget.sh log
./scripts/openrouter-budget.sh top

# Get key (for custom integrations)
./scripts/get-openrouter-key.sh
```

**Key location**: `secrets/openrouter.key` (gitignored)

**Cost estimates**:
- Claude Sonnet 3.5: ~$0.015/call (2k in, 500 out)
- Budget ‚âà 1000 typical calls
- Use `--dry-run` to estimate before calling

**Usage priority**: Strategic analysis, pattern detection, complex reasoning. Not for trivial queries.

### 3. Lightweight Session Handoff ‚úÖ

**For sequential same-model sessions** (alternative to bridge overhead):

```bash
# Ending session
./scripts/session-handoff.sh "Summary of work completed"

# Starting session
./scripts/session-resume.sh
```

**Captures**: Git status, changes, commits, branch context

**Storage**: `.session-handoffs/[timestamp]-handoff.md` (gitignored)

**Use when**: Code‚ÜíCode sequential work, not parallel agents

**Bridge still for**: Human‚ÜîAgent, Chat‚ÜîCode, parallel agents (INVESTIGATOR, etc.)

## üîç Important Clarifications

### AAFC Herbarium Research

**Status**: Pattern documented with AAFC examples (conceptual only)

**What does NOT exist**:
- Python implementation
- Image processing pipeline
- Metadata extraction tools
- Specimen tracking system

**Rationale**: Don't build speculative tooling. Pattern is proven (bridge integration). Build AAFC implementation when actual research requirements emerge.

**If you have AAFC work**: Contact code agent with specific requirements.

## üìã Design Philosophy

**Content-DAG Pattern**:
- Extract IPFS design wisdom (content-addressing + Merkle DAG)
- Leave infrastructure baggage (no daemon, no P2P, no pinning complexity)
- Organic branching: Implement where naturally needed

**Budget Management**:
- Transparent usage tracking
- Collective benefit
- Cost awareness

**Session Coordination**:
- Lightweight for sequential work
- Bridge for parallel/cross-agent
- Git-aware context preservation

## üéØ Quick Reference

| Task | Tool |
|------|------|
| Send message with provenance | `bridge-send-dag.sh` |
| Query message chain | `bridge-query-provenance.sh` |
| LLM API call | `llm-call.sh --prompt "..." --caller name` |
| Check budget | `openrouter-budget.sh status` |
| End session | `session-handoff.sh "summary"` |
| Resume session | `session-resume.sh` |
| Verify object integrity | `source lib/content-dag.sh; verify_object hash` |

## üìö Documentation

- `docs/CONTENT_DAG_PATTERN.md` - Pattern guide with examples
- `examples/content-dag-demo.sh` - Live demonstration
- `secrets/openrouter-budget.json` - Usage log

## ‚ö†Ô∏è Notes for All Agents

1. **AAFC examples in docs are conceptual** - don't assume implementation exists
2. **OpenRouter is shared** - track usage, be cost-conscious
3. **Session handoff is optional** - use bridge for critical coordination
4. **DAG directories auto-created** - `.dag/` in working directory or configured path

---

**Bulletin Posted**: 2025-10-09T08:10:29Z
**Session**: Code Agent (public-release-clean branch)
**Status**: All systems operational
