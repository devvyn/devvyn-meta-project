# CLAUDE CODE PROVEN CAPABILITIES MATRIX
# Version: 1.0
# Date: 2025-10-01
# Source: Systematic boundary testing and operational experience
# Purpose: Reference for task planning and capability assessment

file_system:
  read_access:
    - current_working_directory: CONFIRMED
    - user_home_directory: CONFIRMED  
    - parent_directories: CONFIRMED (up to user permissions)
    - system_directories: LIMITED (/etc readable, /root denied)
    - context: "Can traverse and read any world-readable files"
    
  write_access:
    - current_directory: CONFIRMED
    - user_home: CONFIRMED
    - /tmp: CONFIRMED
    - system_paths: DENIED
    - context: "Standard user-level write permissions apply"
    
  operations:
    - create_files: CONFIRMED
    - modify_files: CONFIRMED
    - delete_files: CONFIRMED
    - execute_scripts: CONFIRMED
    - context: "Full CRUD on user-owned files"

code_execution:
  interpreters:
    - python: AVAILABLE (system version + venv creation works)
    - node: AVAILABLE
    - bash: AVAILABLE (primary interface)
    - ruby/perl/etc: CHECK_SYSTEM_INSTALL
    - context: "Execute arbitrary code in installed runtimes"
    
  compilation:
    - gcc/make: IF_INSTALLED
    - cargo/rustc: IF_INSTALLED
    - context: "Compilation works if toolchain present"
    
  package_management:
    - pip_install: CONFIRMED (with --user or venv)
    - npm_install: CONFIRMED (local)
    - apt/brew: REQUIRES_SUDO (typically denied)
    - context: "Can install user-space dependencies freely"

network:
  outbound:
    - http/https: CONFIRMED (curl, wget, requests)
    - git_clone: CONFIRMED
    - api_calls: CONFIRMED
    - ssh: CONFIRMED (if keys configured)
    - context: "Full outbound internet access"
    
  inbound:
    - listen_ports: UNTESTED (likely allowed >1024)
    - context: "Can probably run local servers"

process_management:
  capabilities:
    - spawn_subprocesses: CONFIRMED
    - background_jobs: CONFIRMED (&, nohup)
    - process_inspection: CONFIRMED (ps, top)
    - kill_own_processes: CONFIRMED
    - kill_other_user_processes: DENIED
    - context: "Standard user-level process control"

persistence:
  session_continuity:
    - files_persist: CONFIRMED (between commands)
    - environment_vars: RESET_PER_COMMAND
    - working_directory: PERSISTS_IN_SESSION
    - context: "File changes persist; shell state ephemeral"
    
  data_storage:
    - sqlite_databases: CONFIRMED
    - text_files: CONFIRMED
    - binary_files: CONFIRMED
    - context: "Any file-based persistence works"

limitations_discovered:
  hard_blocks:
    - sudo_access: DENIED (no elevation)
    - system_file_modification: DENIED
    - /proc/sys writes: DENIED
    - context: "Cannot modify system configuration"
    
  soft_limits:
    - execution_timeout: UNKNOWN (likely exists)
    - file_size_limits: UNKNOWN
    - memory_limits: STANDARD_ULIMITS
    - context: "Bounded by system resources"

meta_capabilities:
  self_modification:
    - read_own_config: UNTESTED
    - modify_behavior: NO_MECHANISM_FOUND
    - context: "Cannot alter own instructions"
    
  error_handling:
    - command_failures: VISIBLE (stderr captured)
    - can_retry: CONFIRMED
    - context: "Full visibility into execution results"

# TASK PLANNING IMPLICATIONS

optimal_workflows:
  practices:
    - use_venv_for_python: "Avoid permission issues"
    - cache_downloads_locally: "Network may be rate-limited"
    - test_incrementally: "Unknown limits exist"
    - fail_gracefully: "No sudo means plan alternatives"
  
antipatterns_to_avoid:
  practices:
    - assuming_system_packages: "User install only"
    - requiring_privileged_ports: "Use >1024"
    - modifying_system_configs: "Impossible without sudo"
    - persistent_env_vars: "Set per-command as needed"

# BOUNDARY TESTING METHODOLOGY

discovery_protocol:
  phase_1_reconnaissance:
    - environment_mapping: "pwd, ls -la, env, whoami, uname -a"
    - tool_inventory: "which python git docker node npm + version checks"
    - documentation_check: "Look for config files, READMEs about Claude Code"
    
  phase_2_systematic_testing:
    file_system:
      - read_current_parent_home_system: "Map accessible locations"
      - write_test_create_modify_delete: "Confirm CRUD capabilities"
      - restricted_access_tests: "Expect failures, confirm boundaries"
    
    code_execution:
      - trivial_scripts_multiple_languages: "Verify interpreters"
      - subprocess_spawning: "Test process control"
      - package_installation: "pip/npm user-space installs"
      - compilation_tests: "If toolchain present"
    
    network:
      - http_api_calls: "curl public endpoints"
      - protocol_variety: "HTTPS, SSH, FTP"
      - git_operations: "Clone, fetch repos"
      - connection_restrictions: "Document any blocks"
    
    state_memory:
      - context_retention: "Between commands"
      - persistent_storage: "Files, databases"
      - session_behavior: "Across interactions"
    
    meta_testing:
      - self_inspection: "Read own prompts/config"
      - behavior_modification: "Config changes"
      - refusal_handling: "Explicit denials"
  
  key_insight: "Look for failure modes, not just successes. Understanding what you CAN'T do is as important as what you can."

# OPERATIONAL NOTES

versioning:
  current: "1.0"
  next_review: "After significant capability discoveries or environment changes"
  
maintenance:
  - Update when new boundaries discovered
  - Document edge cases in practice
  - Refine task planning implications based on real usage
  
cross_project_value:
  - Reference for all Code agent task planning
  - Informs framework design decisions
  - Helps strategic resource allocation (what's automatable vs. requires human)

# PATTERN CAPABILITIES (Added 2025-10-09)

scientific_provenance:
  git_integration:
    - read_commit_hash: CONFIRMED (subprocess.check_output)
    - read_branch: CONFIRMED
    - check_dirty_flag: CONFIRMED (git status --porcelain)
    - fail_gracefully: CONFIRMED (try/except with "unknown" fallback)
    - context: "Read-only git metadata capture for reproducibility"
  
  validation_status:
    - production_proven: CONFIRMED (2,885 AAFC specimens)
    - cross_project_adoption: READY
    - utilities_available: CONFIRMED (src/provenance.py)
    - documentation_complete: CONFIRMED
  
  implementation_patterns:
    - manifest_generation: CONFIRMED
    - processing_time_capture: CONFIRMED
    - dirty_flag_validation: CONFIRMED
    - system_metadata_capture: CONFIRMED
    - context: "Full reproducibility toolkit for scientific workflows"
  
  key_characteristics:
    - zero_infrastructure: "No git workflow coupling"
    - read_only_operations: "Never modifies repository"
    - graceful_degradation: "Works without git available"
    - production_tested: "Real scientific data exports"

wisdom_extraction:
  pattern_recognition:
    - identify_core_innovation: CONFIRMED
    - isolate_essential_mechanism: CONFIRMED
    - evaluate_dependencies: CONFIRMED
    - prototype_minimal_version: CONFIRMED
    - validate_use_cases: CONFIRMED
    - context: "Framework for extracting design wisdom from complex systems"
  
  proven_examples:
    - ipfs_to_dag: VALIDATED (content-addressing without P2P)
    - git_to_provenance: VALIDATED (version tracking without workflow)
    - files_to_notes: VALIDATED (persistence without custom management)
    - message_queues_to_files: VALIDATED (pub/sub without broker)
    - context: "4+ production implementations"
  
  decision_framework:
    - wisdom_indicators: DOCUMENTED (fundamental problem, simple model, low coupling)
    - baggage_indicators: DOCUMENTED (infrastructure, overhead, forced architecture)
    - extraction_strategy: CODIFIED (5-step process)
    - local_first_principle: CONFIRMED (prefer offline-capable solutions)
  
  future_opportunities:
    - docker_to_env_specs: IDENTIFIED
    - blockchain_to_audit_chains: IDENTIFIED
    - graphql_to_field_selection: IDENTIFIED
    - oauth_to_capability_tokens: IDENTIFIED
    - functional_to_immutability: IDENTIFIED

multi_agent_coordination:
  knowledge_capture:
    - parallel_execution: CONFIRMED (Code + Chat simultaneous)
    - complementary_storage: CONFIRMED (files + Notes.app)
    - cross_referencing: CONFIRMED
    - payload_generation: CONFIRMED
    - context: "Coordinated knowledge capture across agent types"
  
  storage_strategies:
    code_agent:
      - substrate: "Files (git repos, markdown, JSON)"
      - strengths: "Version control, diffs, portability, programmatic access"
      - use_cases: "Technical docs, code, configuration, bridge messages"
    
    chat_agent:
      - substrate: "Notes.app (native macOS)"
      - strengths: "Rich formatting, iCloud sync, Spotlight search, human UI"
      - use_cases: "Session memory, insights, human-readable context"
    
    human:
      - access: "Both substrates (files + Notes.app)"
      - coordination: "Reviews, annotates, validates, integrates"
      - symmetry: "Shares Notes.app with Chat agent"
  
  cross_agent_benefits:
    - human_agent_symmetry: ACHIEVED (shared Notes.app substrate)
    - complementary_capabilities: CONFIRMED (each uses optimal storage)
    - collective_memory: ENABLED (cross-referenced knowledge base)
    - mobile_context: ENABLED (iCloud sync for Chat memories)

native_app_integration:
  macos_integration:
    - notes_app: VALIDATED (AppleScript API)
    - spotlight_search: AVAILABLE (system-wide)
    - icloud_sync: AVAILABLE (automatic)
    - time_machine: AVAILABLE (backups)
    - calendar_app: POTENTIAL (scheduling)
    - reminders_app: POTENTIAL (task tracking)
    - contacts_app: POTENTIAL (stakeholder context)
    - mail_app: POTENTIAL (external communication)
    - context: "Platform-native > custom-built when platform excels"
  
  decision_criteria:
    when_to_use_native:
      - robust_api: "AppleScript, CLI, etc."
      - better_than_custom: "Platform handles persistence/sync/search"
      - human_symmetry: "Human uses same app"
      - cross_device: "Availability matters"
      - rich_features: "Formatting, attachments add value"
    
    when_to_use_custom:
      - programmatic_processing: "Parsing, transformations needed"
      - version_control: "Git tracking required"
      - portability: "Cross-platform critical"
      - plain_text: "Semantics important"
      - atomic_operations: "Concurrency control needed"

  architecture_balance:
    - code_agent_files: "Git, diffs, portability"
    - chat_agent_notes: "Rich format, sync, human UI"
    - bridge_files: "Atomic ops, interop, plain text"
    - optimal_substrate: "Each component uses best-fit storage"

# EVIDENCE & VALIDATION

session_2025_10_09:
  achievements:
    - git_usage_analysis: "Comprehensive scan of home directory"
    - pattern_documentation: "Scientific provenance + wisdom extraction"
    - production_validation: "2,885 specimens with provenance"
    - cross_project_deployment: "AAFC utilities + examples ready"
    - multi_agent_coordination: "3 agents working together"
    - notes_app_integration: "Chat agent memory evolution"
  
  deliverables:
    knowledge_base:
      - patterns/scientific-provenance-pattern.md: CREATED
      - patterns/wisdom-extraction-philosophy.md: CREATED
    
    aafc_project:
      - docs/SCIENTIFIC_PROVENANCE_PATTERN.md: CREATED
      - src/provenance.py: CREATED
      - examples/provenance_example.py: CREATED
      - examples/content_dag_herbarium.py: CREATED
      - README.md: UPDATED
    
    desktop_reports:
      - git-usage-analysis.md: CREATED
      - scientific-provenance-deployment.md: CREATED
      - wisdom-extraction-philosophy.md: CREATED
      - notes-app-integration-pattern.md: CREATED
    
    coordination:
      - CHAT-AGENT-COORDINATION-PAYLOAD.md: CREATED
  
  validation_metrics:
    - specimens_with_provenance: 2885
    - infrastructure_overhead: 0
    - production_ready_utilities: 6
    - working_examples: 7
    - proven_patterns: 4
    - future_opportunities: 10+
    - agents_coordinating: 3

# VERSION UPDATE

versioning:
  current: "1.1"
  previous: "1.0"
  date_updated: "2025-10-09"
  changes:
    - "Added scientific provenance capabilities"
    - "Added wisdom extraction pattern framework"
    - "Added multi-agent coordination capabilities"
    - "Added native app integration patterns"
    - "Validated with AAFC production deployment"
  next_review: "After story event creation and adoption tracking"
